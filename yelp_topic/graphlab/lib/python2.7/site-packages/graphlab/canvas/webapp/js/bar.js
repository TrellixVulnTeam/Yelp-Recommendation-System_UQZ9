define("bar",["react","plots","common_util","taskqueue","common_controls"],function(React,Plots,Util,TaskQueue,Controls){"use strict";return{View:React.createClass({mixins:[Controls.AsyncState],getInitialState:function(props){if(!props){props=this.props}return{barData:props.ipython?props.barData:[],numLabel:props.selected_variable.view_params.y,catLabel:props.selected_variable.view_params.x,extrema:props.ipython?props.extrema:{},width:500,height:500}},updateAsyncState:function(nextProps){if(nextProps.selected_variable.descriptives.rows<=100){var pageTasks=[];pageTasks.push(new TaskQueue.SingleTask("/bar_values",".values()").done(function(data){this.setState({barData:data["data"]})}.bind(this)));pageTasks.push(new TaskQueue.SingleTask("/extrema",".extrema()").done(function(data){this.setState({extrema:data})}.bind(this)));this.addTask(new TaskQueue.MultiTask(pageTasks))}},render:function(){if(this.props.selected_variable.descriptives.rows>100){return React.DOM.p(null,"Bar charts can only be used on SFrames with fewer than 100 rows. You can use ",React.DOM.code(null,React.DOM.a({target:"_blank",href:"http://graphlab.com/products/create/docs/generated/graphlab.SFrame.groupby.html#graphlab.SFrame.groupby"},"groupby"))," to aggregate the data in this SFrame to a suitable size for a bar chart, or choose a smaller SFrame.")}if(this.state.barData.length==0||this.state.extrema.min==null){return React.DOM.div(null)}return Plots.Bar({barData:this.state.barData,catLabel:this.state.catLabel,numLabel:this.state.numLabel,extrema:this.state.extrema,width:this.state.width,height:this.state.height,selectVariable:this.props.selectVariable,ipython:this.props.ipython,plotName:this.props.selected_variable.name[0]})}})}});