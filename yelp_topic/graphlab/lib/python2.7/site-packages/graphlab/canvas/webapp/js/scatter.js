define("scatter",["react","plots","common_util","taskqueue","common_controls"],function(React,Plots,Util,TaskQueue,Controls){"use strict";var currentPageTask;var SCATTER_THRESHOLD=5e3;var View=React.createClass({displayName:"View",mixins:[Controls.AsyncState],getInitialState:function(props){if(!props){props=this.props}return{pointsList:props.ipython?props.pointsList:[],extrema:props.ipython?props.extrema:{},coefficients:props.ipython?props.coefficients:{},xLabel:props.selected_variable.view_params.x,yLabel:props.selected_variable.view_params.y,width:500,height:500}},updateAsyncState:function(props){if(props.selected_variable.descriptives.rows>SCATTER_THRESHOLD)return;this.updateData()},updateData:function(){var pageTasks=[];pageTasks.push(new TaskQueue.SingleTask("/scatter_values",".values()").done(function(data){this.setState({pointsList:data["data"]})}.bind(this)));pageTasks.push(new TaskQueue.SingleTask("/coefficients",".coefficients()").done(function(data){this.setState({coefficients:data})}.bind(this)));pageTasks.push(new TaskQueue.SingleTask("/sketchvalues",".sketchvalues()").done(function(data){this.setState({extrema:data})}.bind(this)));currentPageTask=new TaskQueue.MultiTask(pageTasks);this.addTask(currentPageTask)},getDefaultProps:function(){return{lineGraph:false}},render:function(){var unableToShowScatter=this.props.selected_variable.descriptives.rows>SCATTER_THRESHOLD;if(unableToShowScatter){return React.DOM.p(null,"Scatter plots can only be used on SFrames with fewer than 5000 rows. You can use ",React.DOM.code(null,React.DOM.a({target:"_blank",href:"http://graphlab.com/products/create/docs/generated/graphlab.SFrame.groupby.html#graphlab.SFrame.groupby"},"groupby"))," to aggregate the data in this SFrame to a suitable size, choose a smaller SFrame, or use a heat map.")}var plotToShow;if(this.state.pointsList.length==0||this.state.extrema.minX==null)return React.DOM.div(null," ");plotToShow=Plots.Scatter({data:this.state.pointsList,extrema:this.state.extrema,xLabel:this.state.xLabel,yLabel:this.state.yLabel,width:this.state.width,height:this.state.height,coefficients:this.state.coefficients,selectVariable:this.props.selectVariable,plotName:this.props.selected_variable.name[0],lineGraph:this.props.lineGraph,ipython:this.props.ipython});return plotToShow}});return{"Line Chart":React.createClass({getDefaultProps:function(){return{lineGraph:true}},render:function(){if(this.props.selected_variable.descriptives.rows>500){return React.DOM.p(null,"Line charts can only be used on SFrames with fewer than 500 rows. You can use ",React.DOM.code(null,React.DOM.a({target:"_blank",href:"http://graphlab.com/products/create/docs/generated/graphlab.SFrame.groupby.html#graphlab.SFrame.groupby"},"groupby"))," to aggregate the data in this SFrame to a suitable size for a line chart, or choose a smaller SFrame.")}return this.transferPropsTo(View())}}),View:View}});